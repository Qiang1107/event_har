=== 时间窗口投票预测系统 ===
模型类型: pointnet2msg
时间窗口: 1.0秒
投票方法: 简单多数投票
数据来源: preprocessing_data/test_data_0628_8_ecount_3_vote.pkl
配置文件: configs/har_test_config.yaml
模型文件: results/checkpoints/pointnet2_event_0628_8_ecount_11.pth
开始时间: 2025-09-01 16:34:58

使用设备: cuda:0
模型加载成功: results/checkpoints/pointnet2_event_0628_8_ecount_11.pth

加载 vote dataset: preprocessing_data/test_data_0628_8_ecount_3_vote.pkl
加载了 11278 个带时间戳的样本
开始对 11278 个样本进行预测...
按 1.0秒 时间窗口分组预测结果...
在 270 个时间窗口内进行多数投票...
警告：时间窗口 1751111408 内有混合标签 {0, 7}，跳过该窗口
警告：时间窗口 1751111409 内有混合标签 {0, 4}，跳过该窗口
警告：时间窗口 1751111851 内有混合标签 {5, 7}，跳过该窗口
警告：时间窗口 1751111914 内有混合标签 {0, 2}，跳过该窗口
警告：时间窗口 1751111938 内有混合标签 {5, 7}，跳过该窗口
警告：时间窗口 1751112070 内有混合标签 {3, 7}，跳过该窗口
警告：时间窗口 1751112386 内有混合标签 {5, 6}，跳过该窗口
警告：时间窗口 1751113405 内有混合标签 {3, 7}，跳过该窗口
警告：时间窗口 1751114629 内有混合标签 {5, 6}，跳过该窗口
警告：时间窗口 1751114633 内有混合标签 {0, 3}，跳过该窗口
警告：时间窗口 1751114789 内有混合标签 {0, 7}，跳过该窗口
警告：时间窗口 1751115198 内有混合标签 {4, 7}，跳过该窗口
警告：时间窗口 1751115568 内有混合标签 {0, 5}，跳过该窗口
混合标签的时间窗口数: 13/270 (4.8%)
移除混合标签窗口后，剩余有效窗口数: 257/270
预测完成，耗时: 80.34秒

=== 时间窗口投票结果分析 ===
时间窗口数量: 257
单样本预测数量: 11278
单样本准确率: 0.9734 (97.34%)
时间窗口投票准确率: 0.9844 (98.44%)
准确率提升: +0.0110 (+1.10%)

=== 投票统计 ===
每窗口预测数量 - 平均: 40.8, 最小: 1, 最大: 181
投票一致性 - 平均: 0.971, 最小: 0.556, 最大: 1.000
混合标签窗口: 13/270 (4.8%) - 已移除
有效分析窗口: 257/270 (95.2%)

=== 多数投票后各类别表现 ===
类别                   窗口数      准确率       
----------------------------------------
Approach             55       0.9818    
Pick_and_Place_Bolt  25       0.9600    
Pick_and_Place_Cover 30       1.0000    
Pick_and_Place_Part1_Small 16       0.8750    
Pick_and_Place_Part2_Big 22       1.0000    
Pick_and_Place_Screwdriver 36       1.0000    
Screw                36       1.0000    
Transition           37       1.0000    

=== 单样本各类别表现 ===
类别                   样本数      准确率       
----------------------------------------
Approach             2677     0.9765    
Pick_and_Place_Bolt  937      0.9552    
Pick_and_Place_Cover 1731     0.9757    
Pick_and_Place_Part1_Small 708      0.9534    
Pick_and_Place_Part2_Big 1184     0.9882    
Pick_and_Place_Screwdriver 1877     0.9728    
Screw                493      0.9716    
Transition           1671     0.9755    

=== 窗口级混淆矩阵 ===
54,0,0,0,0,0,0,1
0,24,0,0,0,1,0,0
0,0,30,0,0,0,0,0
0,0,0,14,2,0,0,0
0,0,0,0,22,0,0,0
0,0,0,0,0,36,0,0
0,0,0,0,0,0,36,0
0,0,0,0,0,0,0,37

=== 窗口级归一化混淆矩阵 ===
0.98,0.00,0.00,0.00,0.00,0.00,0.00,0.02
0.00,0.96,0.00,0.00,0.00,0.04,0.00,0.00
0.00,0.00,1.00,0.00,0.00,0.00,0.00,0.00
0.00,0.00,0.00,0.88,0.12,0.00,0.00,0.00
0.00,0.00,0.00,0.00,1.00,0.00,0.00,0.00
0.00,0.00,0.00,0.00,0.00,1.00,0.00,0.00
0.00,0.00,0.00,0.00,0.00,0.00,1.00,0.00
0.00,0.00,0.00,0.00,0.00,0.00,0.00,1.00

=== 单样本级混淆矩阵 ===
2614,0,6,8,7,2,1,39
0,895,0,25,0,17,0,0
0,4,1689,0,38,0,0,0
7,3,0,675,7,16,0,0
0,0,1,12,1170,0,0,1
16,18,4,2,2,1826,5,4
0,1,0,0,0,13,479,0
32,0,0,7,0,2,0,1630

=== 单样本级归一化混淆矩阵 ===
0.98,0.00,0.00,0.00,0.00,0.00,0.00,0.01
0.00,0.96,0.00,0.03,0.00,0.02,0.00,0.00
0.00,0.00,0.98,0.00,0.02,0.00,0.00,0.00
0.01,0.00,0.00,0.95,0.01,0.02,0.00,0.00
0.00,0.00,0.00,0.01,0.99,0.00,0.00,0.00
0.01,0.01,0.00,0.00,0.00,0.97,0.00,0.00
0.00,0.00,0.00,0.00,0.00,0.03,0.97,0.00
0.02,0.00,0.00,0.00,0.00,0.00,0.00,0.98

混淆矩阵图片保存路径:
窗口级: results/test_figs/pointnet2_event_0628_8_ecount_11_window_confusion_matrix_time_window_sec_1.0s_20250901_163458.png
窗口级归一化: results/test_figs/pointnet2_event_0628_8_ecount_11_window_norm_confusion_matrix_1.0s_20250901_163458.png
单样本级: results/test_figs/pointnet2_event_0628_8_ecount_11_individual_confusion_matrix_1.0s_20250901_163458.png
单样本级归一化: results/test_figs/pointnet2_event_0628_8_ecount_11_individual_norm_confusion_matrix_1.0s_20250901_163458.png

=== 主要指标 ===
时间窗口数量: 257
单样本预测数量: 11278
单样本准确率: 0.9734
时间窗口投票准确率: 0.9844
准确率提升: +0.0110
预测时间: 80.34秒
结束时间: 2025-09-01 16:36:20

=== 结果总结 ===
时间窗口投票准确率: 0.9844
单样本准确率: 0.9734
准确率提升: +0.0110
日志文件: results/test_logs/voting_1.0s_20250901_163458.txt
