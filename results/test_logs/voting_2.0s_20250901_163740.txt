=== 时间窗口投票预测系统 ===
模型类型: pointnet2msg
时间窗口: 2.0秒
投票方法: 简单多数投票
数据来源: preprocessing_data/test_data_0628_8_ecount_3_vote.pkl
配置文件: configs/har_test_config.yaml
模型文件: results/checkpoints/pointnet2_event_0628_8_ecount_11.pth
开始时间: 2025-09-01 16:37:40

使用设备: cuda:0
模型加载成功: results/checkpoints/pointnet2_event_0628_8_ecount_11.pth

加载 vote dataset: preprocessing_data/test_data_0628_8_ecount_3_vote.pkl
加载了 11278 个带时间戳的样本
开始对 11278 个样本进行预测...
按 2.0秒 时间窗口分组预测结果...
在 183 个时间窗口内进行多数投票...
警告：时间窗口 875555704 内有混合标签 {0, 4, 7}，跳过该窗口
警告：时间窗口 875555924 内有混合标签 {5, 6}，跳过该窗口
警告：时间窗口 875555925 内有混合标签 {5, 7}，跳过该窗口
警告：时间窗口 875555956 内有混合标签 {0, 3}，跳过该窗口
警告：时间窗口 875555957 内有混合标签 {0, 2}，跳过该窗口
警告：时间窗口 875555969 内有混合标签 {5, 7}，跳过该窗口
警告：时间窗口 875556035 内有混合标签 {3, 7}，跳过该窗口
警告：时间窗口 875556193 内有混合标签 {5, 6}，跳过该窗口
警告：时间窗口 875556702 内有混合标签 {3, 7}，跳过该窗口
警告：时间窗口 875557314 内有混合标签 {5, 6}，跳过该窗口
警告：时间窗口 875557316 内有混合标签 {0, 3}，跳过该窗口
警告：时间窗口 875557370 内有混合标签 {0, 7}，跳过该窗口
警告：时间窗口 875557394 内有混合标签 {0, 7}，跳过该窗口
警告：时间窗口 875557398 内有混合标签 {0, 4}，跳过该窗口
警告：时间窗口 875557484 内有混合标签 {4, 7}，跳过该窗口
警告：时间窗口 875557599 内有混合标签 {4, 7}，跳过该窗口
警告：时间窗口 875557784 内有混合标签 {0, 5}，跳过该窗口
混合标签的时间窗口数: 17/183 (9.3%)
移除混合标签窗口后，剩余有效窗口数: 166/183
预测完成，耗时: 80.08秒

=== 时间窗口投票结果分析 ===
时间窗口数量: 166
单样本预测数量: 11278
单样本准确率: 0.9732 (97.32%)
时间窗口投票准确率: 0.9940 (99.40%)
准确率提升: +0.0208 (+2.08%)

=== 投票统计 ===
每窗口预测数量 - 平均: 57.1, 最小: 1, 最大: 296
投票一致性 - 平均: 0.968, 最小: 0.538, 最大: 1.000
混合标签窗口: 17/183 (9.3%) - 已移除
有效分析窗口: 166/183 (90.7%)

=== 多数投票后各类别表现 ===
类别                   窗口数      准确率       
----------------------------------------
Approach             44       0.9773    
Pick_and_Place_Bolt  16       1.0000    
Pick_and_Place_Cover 17       1.0000    
Pick_and_Place_Part1_Small 10       1.0000    
Pick_and_Place_Part2_Big 11       1.0000    
Pick_and_Place_Screwdriver 20       1.0000    
Screw                20       1.0000    
Transition           28       1.0000    

=== 单样本各类别表现 ===
类别                   样本数      准确率       
----------------------------------------
Approach             2677     0.9720    
Pick_and_Place_Bolt  937      0.9530    
Pick_and_Place_Cover 1731     0.9798    
Pick_and_Place_Part1_Small 708      0.9506    
Pick_and_Place_Part2_Big 1184     0.9840    
Pick_and_Place_Screwdriver 1877     0.9723    
Screw                493      0.9757    
Transition           1671     0.9820    

=== 窗口级混淆矩阵 ===
43,0,0,0,0,0,0,1
0,16,0,0,0,0,0,0
0,0,17,0,0,0,0,0
0,0,0,10,0,0,0,0
0,0,0,0,11,0,0,0
0,0,0,0,0,20,0,0
0,0,0,0,0,0,20,0
0,0,0,0,0,0,0,28

=== 窗口级归一化混淆矩阵 ===
0.98,0.00,0.00,0.00,0.00,0.00,0.00,0.02
0.00,1.00,0.00,0.00,0.00,0.00,0.00,0.00
0.00,0.00,1.00,0.00,0.00,0.00,0.00,0.00
0.00,0.00,0.00,1.00,0.00,0.00,0.00,0.00
0.00,0.00,0.00,0.00,1.00,0.00,0.00,0.00
0.00,0.00,0.00,0.00,0.00,1.00,0.00,0.00
0.00,0.00,0.00,0.00,0.00,0.00,1.00,0.00
0.00,0.00,0.00,0.00,0.00,0.00,0.00,1.00

=== 单样本级混淆矩阵 ===
2602,0,9,10,7,6,0,43
0,893,0,25,0,19,0,0
0,1,1696,0,34,0,0,0
10,3,0,673,4,18,0,0
0,0,4,14,1165,0,0,1
14,20,4,2,1,1825,7,4
0,0,0,0,0,12,481,0
21,0,0,8,0,1,0,1641

=== 单样本级归一化混淆矩阵 ===
0.97,0.00,0.00,0.00,0.00,0.00,0.00,0.02
0.00,0.95,0.00,0.03,0.00,0.02,0.00,0.00
0.00,0.00,0.98,0.00,0.02,0.00,0.00,0.00
0.01,0.00,0.00,0.95,0.01,0.03,0.00,0.00
0.00,0.00,0.00,0.01,0.98,0.00,0.00,0.00
0.01,0.01,0.00,0.00,0.00,0.97,0.00,0.00
0.00,0.00,0.00,0.00,0.00,0.02,0.98,0.00
0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.98

混淆矩阵图片保存路径:
窗口级: results/test_figs/pointnet2_event_0628_8_ecount_11_window_confusion_matrix_time_window_sec_2.0s_20250901_163740.png
窗口级归一化: results/test_figs/pointnet2_event_0628_8_ecount_11_window_norm_confusion_matrix_2.0s_20250901_163740.png
单样本级: results/test_figs/pointnet2_event_0628_8_ecount_11_individual_confusion_matrix_2.0s_20250901_163740.png
单样本级归一化: results/test_figs/pointnet2_event_0628_8_ecount_11_individual_norm_confusion_matrix_2.0s_20250901_163740.png

=== 主要指标 ===
时间窗口数量: 166
单样本预测数量: 11278
单样本准确率: 0.9732
时间窗口投票准确率: 0.9940
准确率提升: +0.0208
预测时间: 80.08秒
结束时间: 2025-09-01 16:39:02

=== 结果总结 ===
时间窗口投票准确率: 0.9940
单样本准确率: 0.9732
准确率提升: +0.0208
日志文件: results/test_logs/voting_2.0s_20250901_163740.txt
